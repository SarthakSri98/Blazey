<form class="example-form center1">
  <mat-form-field class="example-full-width">
    <input matInput placeholder="Search">
  </mat-form-field>
</form>
<button mat-fab color="accent" class="openForm" mat-raised-button (click)="addNew(openForm)"><i class="fas fa-plus"></i></button>


<div class="container2" [@fadeIn]="topicArray.length">
  <div class="card" *ngFor="let topic of topicArray;let i = index">
    <div *ngIf="!topic.isSubTopic" (click)="open(openModal,i)">
      <button mat-fab color="accent" class="delete" mat-raised-button (click)="delete(i)"><i class="fa fa-times"></i></button>
      <mat-toolbar color="accent" class="toolbar">
        <span class="title center">{{ i+1 }}. {{ topic.topicName }}</span>
      </mat-toolbar>
      <div class="description1"><span>{{ topic.content.substr(0,140) }} <p *ngIf="topic.content.length>140"
            style="color:red"> ... Read more </p> </span></div>
    </div>
    <div *ngIf="topic.isSubTopic" (click)="goToSubTopic(topic._id)">
        <button mat-fab color="accent" class="delete" mat-raised-button (click)="delete(i)"><i class="fa fa-times"></i></button>
        <div class="description"><span>{{ topic.topicName }} </span></div>
  </div>
</div>




<ng-template #openModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <mat-toolbar>
      <span class="title center2">{{ currentOpened.topicName }}</span>
    </mat-toolbar>
  </div><br>
  <p style="text-align: center;">Important Links : </p><br>
  <div class="modal-body" *ngFor="let linkData of currentOpened.linkData;let i=index">
      
    <table>
      <tr>
      <td><span>{{i+1}}.</span></td>
      <td><a [href]="linkData.link" *ngIf="linkData.linkCaption" class="link">{{ linkData.linkCaption }}</a>
      <a [href]="linkData.link" *ngIf="!linkData.linkCaption" class="link">{{ linkData.link }}</a></td>
    </tr>
    </table>
  </div>
  <p style="text-align: center;">Description</p><br>
  <div class="modal-body">
    <div class="description2"><span>{{ currentOpened.content }}</span></div>
  </div>

</ng-template>

<ng-template #openForm let-c="close" let-d="dismiss">
  <mat-toolbar>
    <span class="title center2">Add new Term</span>
  </mat-toolbar><br><br>
  <form class="example-form center3" [formGroup]="topicForm" (ngSubmit)="add()">
    <mat-form-field class="example-full-width">
      <input matInput placeholder="Topic" formControlName="topicName" required>
    </mat-form-field>
    <input matInput placeholder="Topic" class="genreValue" formControlName="genre" required>

    <mat-form-field class="example-full-width">
      <mat-select #isSt matInput [value]="true" placeholder="Will there be any subtopic" formControlName="isSubTopic">
        <mat-option [value]="true">Yes</mat-option>
        <mat-option [value]="false">No</mat-option>
      </mat-select>
    </mat-form-field>

    <div *ngIf="!isSt.value">
      <div formArrayName="linkData" *ngFor="let item of topicForm.get('linkData').controls; let i = index;">
        <div [formGroupName]="i">
          <mat-form-field class="example-full-width">
            <input matInput placeholder="Link" rows="4" formControlName="link">
          </mat-form-field>

          <mat-form-field class="example-full-width">
            <input matInput placeholder="LinkCaption" rows="4" formControlName="linkCaption">
          </mat-form-field>

        </div>
      </div>
      <span (click)="addItem()" class="addLink" style="font-size: 13px;float:right;cursor: pointer;"><i class="fas fa-plus"
          style="font-size: 10px;"></i> Add more Links</span>
      <mat-form-field class="example-full-width">
        <textarea matInput placeholder="Description" rows="4" formControlName="content" required></textarea>
      </mat-form-field>
    </div>
    <button class="formButtons" mat-raised-button (click)="Cross_click()">Cancel</button>
    <button class="formButtons" type="submit" mat-raised-button>Add</button>
  </form>


</ng-template>
